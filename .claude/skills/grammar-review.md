# 文法錯題複習

此 skill 用於練習前複習之前的錯題，加強弱點。

## 使用時機

當用戶說：
- 「複習」
- 「複習昨天的錯題」
- 「看一下之前錯的題目」
- 練習前主動提醒用戶複習

## 工作流程

### Step 1: 讀取最近的錯題檔案

從 `Review/` 資料夾讀取最近的錯題檔案：

```
Review/YYYY-MM-DD_errors.md
```

若有多個檔案，優先讀取最近的。

### Step 2: 顯示錯題摘要

以簡潔的格式顯示錯題重點：

```markdown
## 上次錯題複習

### 1. 〜合う
- 「と」→「合う」（互相）
- 例：部長と**話し合う**

### 2. 〜上がる vs 〜上げる
- を → 上げる（他動詞）
- が → 上がる（自動詞）

...
```

### Step 3: 快速測驗（可選）

詢問用戶是否要做快速測驗：

**測驗格式：**
針對每個錯題出一題類似的新題目，確認用戶是否已掌握。

**防止答案洩漏：** 使用隨機選項順序

選項順序由 `(題號 + 日期數字) % 選項數` 決定正解位置。
例：第 1 題 + 20260128 → 正解在位置 (1+20260128)%2 = 1 → 選項 2

```markdown
### 快速測驗

**Q1:** レポートが（　　）ので、提出します。
1. 書き上がった
2. 書き上げた

**Q2:** 友達と（　　）、解決策を見つけた。
1. 話し合って
2. 話して
```

### Step 4: 更新複習狀態

若用戶通過測驗，可在錯題檔案標記「已複習」：

```markdown
**複習狀態：** ✓ 已於 2026-01-13 複習
```

## 檔案結構

### 錯題檔案格式

```markdown
# 複習清單 - YYYY-MM-DD 錯題

## 錯題1｜文法名稱

**題目：**
> 原題目

**正解：正確答案**

> 正解句（含漢字標記）

**翻譯：** 中文翻譯

**重點：** 記憶要點

---

## 快速記憶卡

| 文法 | 口訣 |
|:---|:---|
| 文法1 | 記憶口訣 |
```

## 主動提醒

當用戶要開始新的練習時，先檢查是否有未複習的錯題：

```
檢測到上次有 4 題錯題尚未複習，要先複習嗎？
```

## 複習策略

### 間隔複習建議

| 時間 | 動作 |
|:---|:---|
| 隔天 | 必須複習 |
| 3天後 | 建議複習 |
| 7天後 | 選擇性複習 |
| 14天後 | 若仍記得可移除 |

### 錯題分類

依據錯誤類型分類，方便針對性複習：

| 類型 | 範例 |
|:---|:---|
| 自他動詞 | 上がる vs 上げる |
| 助詞搭配 | と → 〜合う |
| 形態錯誤 | 連用形 vs て形 |
| 不存在形態 | ~~消し上げる~~ |

## 輸出檔案位置

```
nihongo_cc/
└── Review/
    └── YYYY-MM-DD_errors.md
```

## 範例對話

**用戶：** 我要練習文法

**Claude：**
```
檢測到 Review/2026-01-12_errors.md 有 4 題錯題。

📝 上次錯題重點：
1. 「と」→「〜合う」
2. 「を」→「上げる」/「が」→「上がる」
3. 「消し上げる」不存在
4. 「〜たて」接連用形

要先快速複習嗎？還是直接開始新練習？
```
