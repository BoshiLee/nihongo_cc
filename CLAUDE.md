# 日語學習專案 (Nihongo CC)

這是一個結合 Claude Code 的日語學習系統，用於管理生詞、例句、語法筆記並進行主動學習練習。

## 專案結構

```
nihongo_cc/
├── Raw/           # 原始筆記（閱讀、看劇時記錄的句子）
├── Vocabulary/    # 整理後的單字庫
│   ├── N5/        # JLPT N5 程度
│   ├── N4/        # JLPT N4 程度
│   ├── N3/        # JLPT N3 程度
│   ├── N2/        # JLPT N2 程度
│   ├── N1/        # JLPT N1 程度
│   └── Custom/    # 自訂分類
├── Grammar/       # 語法筆記
│   ├── N5/        # JLPT N5 語法
│   ├── N4/        # JLPT N4 語法
│   ├── N3/        # JLPT N3 語法
│   ├── N2/        # JLPT N2 語法
│   ├── N1/        # JLPT N1 語法
│   └── Custom/    # 自訂語法筆記
├── Practice/      # AI 生成的練習題
├── Review/        # 學習進度與回顧
└── Excalidraw/    # 學習關係圖
```

## 常用指令

### 生詞整理
掃描 `Raw/` 資料夾中的筆記，提取日語句子並整理成表格，包含：原句、中文翻譯、假名標註、關鍵語法點。

### 生成練習題
根據 `Vocabulary/` 中的單字，編寫短篇故事或對話，並附上填空題或選擇題進行練習。

### 作文批改
批改日文作文，找出語法錯誤，用適合學習者程度的方式解釋，並提供修正版本。

### 學習進度分析
分析過去一段時間的學習筆記，找出常犯錯誤的語法點和需要加強的部分。

## 工作流程

1. **收集** - 將閱讀、看劇時遇到的不懂句子記錄到 `Raw/`
2. **處理** - 使用 Claude 批量翻譯、提取單字、加入語法說明
3. **練習** - 讓 Claude 根據已學單字生成練習題
4. **回顧** - 定期分析學習進度，找出盲點

## 筆記格式

單字筆記建議格式：
```markdown
# 単語

- **読み方**:
- **意味**:
- **例文**:
- **文法ポイント**:
```

## NotebookLM 整合

本專案可透過 `/notebooklm` 指令查詢 Google NotebookLM 筆記本，獲得有來源引用的答案。

### 配置管理

NotebookLM 筆記本配置存放於 `.notebooklm/config.json`。

**目前筆記本：**
- **N3 Grammar Analysis**: https://notebooklm.google.com/notebook/55da6f98-4687-4547-a1d9-a2641928f96f

### 使用方式
```
/notebooklm <問題>
```

### 應用場景
- 查詢已上傳至 NotebookLM 的日語教材內容
- 對照文法書籍確認語法解釋
- 從來源文件中找出例句和用法說明
- 確認獨特文法點和去重複

### 優點
- 回答基於上傳的文件，減少幻覺
- 提供引用來源，方便追溯原文
- 可整合多本教材進行交叉查詢

### 新增筆記本
編輯 `.notebooklm/config.json` 並在 `notebooks` 陣列中新增配置

## 文法練習系統

本專案包含完整的文法練習與複習系統。

### 練習流程

1. **查看進度** - 練習前先讀取 `Review/N3_progress.md` 了解學習狀況
2. **複習錯題** - 檢查 `Review/` 是否有未複習的錯題
3. **出題** - 從 `Grammar/N3/` 讀取文法 CSV，生成 5-8 題選擇題
4. **作答** - 用戶回答後進行批改
5. **解析** - 更新練習檔案，加入翻譯、漢字標記、解析
6. **總結** - 整理錯題到 `Review/` 供下次複習
7. **更新進度** - 批改完成後更新 `Review/N3_progress.md`

### 相關 Skills

| Skill | 功能 | 觸發方式 |
| ---- | ---- | ---- |
| `grammar-practice.md` | 出題、批改、儲存練習 | 「練習 ch1 的文法」「出 N3 文法題」 |
| `grammar-review.md` | 練習前複習錯題 | 「複習」「看昨天的錯題」 |
| `learning-map.md` | 生成學習關係圖 | 「畫學習關係圖」「用 Excalidraw 整理」 |

### 檔案命名規則

```
Practice/YYYY-MM-DD_N[等級]_[來源].md      # 練習檔案
Practice/YYYY-MM-DD_N[等級]_[來源]_02.md   # 同日第二回
Practice/YYYY-MM-DD_N[等級]_[來源]_summary.md  # 當日總結
Review/YYYY-MM-DD_errors.md                # 錯題複習
Excalidraw/YYYY-MM-DD_grammar_map.excalidraw  # 學習關係圖
```

### 批改格式

批改後的練習檔案包含：
- 每題的批改結果（✓/❌）
- 正解句（含漢字標記，使用 ruby 格式）
- 中文翻譯
- 解析說明（全題都要有，不只是錯題）
- 重點整理表格

### 漢字標記格式

使用 `{漢字|ふりがな}` 格式標註讀音：

| 寫法 | 顯示效果 |
| ---- | ---- |
| `{漢字|かんじ}` | 漢字（かんじ） |
| `{問題|もんだい}` | 問題（もんだい） |
| `{話し合う|はなしあう}` | 話し合う（はなしあう） |

### 答案標記格式

正解句中的填空答案使用 `<b><u>答案</u></b>` 標記（粗體+下劃線）：

```markdown
> {若|わか}い<b><u>うちに</u></b> いろいろな {経験|けいけん}を しておきたい。
```

### 錯題複習

錯題檔案包含：
- 原題目與正解
- 完整句子（含振假名）
- 錯誤原因分析
- 快速記憶卡

## 學習關係圖

使用 Excalidraw 生成當日學習內容的視覺化關係圖。

### 功能

- 將文法點按類別分組（時間、程度、話題、決定等）
- 標記答對（綠色）和答錯（紅色）的文法點
- 用紅色箭頭連接易混淆的文法組合
- 顯示當日總分統計

### 使用方式

```
「畫學習關係圖」
「用 Excalidraw 整理今天學的文法」
「繪製文法關係圖」
```

### 圖表顏色

| 顏色 | 意義 |
| ---- | ---- |
| 綠色 | 答對的文法點 |
| 紅色 | 答錯/需加強的文法點 |
| 紫色 | 分類標題 |
| 黃色 | 重點摘要 |

### 輸出位置

```
Excalidraw/YYYY-MM-DD_grammar_map.excalidraw
```

可用 Obsidian Excalidraw 插件或 excalidraw.com 開啟編輯。

## 出題規則

出完題目立即存放在 Pratice 資料夾

### 禁止洩漏答案
- 出題時**不可在選項旁標示正解**
- 出題時**不可在提示中給出可能答案的範例**（如「請回覆 8 個答案（例：2 3 3 2 3 3 3 3）」）
- 正確格式：`請回覆 X 個答案：`
- 批改時才顯示正解與解析

## 注意事項

- 所有筆記使用 Markdown 格式
- **Markdown 表格前必須空一行**，否則無法正確渲染：
  ```markdown
  **標題：**

  | 欄位 | 內容 |
  | ---- | ---- |
  ```
- 日語內容盡量標註假名（振り仮名）
- 練習題存放於 `Practice/` 並標註日期
- 錯題存放於 `Review/` 供下次練習前複習
- AI 生成的內容經確認後再移入永久知識庫
